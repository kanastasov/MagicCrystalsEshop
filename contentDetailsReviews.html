<!DOCTYPE html>
<html lang="bg">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Отзиви</title>
    <link rel="stylesheet" href="css/reviews.css">
</head>

<body>
    <div class="review-section">
        <h2>Добавете вашия отзив</h2>
    </div>

    <form id="reviewForm">
        <!-- <label for="reviewText">Отзив:</label> -->

            <div id="review-container">
                <div id="rating">
                    <span class="star" data-value="1">&#9733;</span>
                    <span class="star" data-value="2">&#9733;</span>
                    <span class="star" data-value="3">&#9733;</span>
                    <span class="star" data-value="4">&#9733;</span>
                    <span class="star" data-value="5">&#9733;</span>
                </div>
                <div id="review-form">
                    <textarea id="review-text" placeholder="Напишете ревю..."></textarea>
                    <button id="submit-review">Добавете ревю</button>
                </div>
            </div>
    </form>
<div class="review-section">
    <h2>Отзиви</h2>
        </div>

    <div id="reviewList"></div>

    <script>
       document.addEventListener("DOMContentLoaded", function () {
    let reviews = JSON.parse(localStorage.getItem("reviews")) || [];
    let stars = document.querySelectorAll("#rating .star");
    let selectedRating = 0;

    function displayReviews() {
        let reviewList = document.getElementById("reviewList");
        reviewList.innerHTML = "";
        reviews.forEach(review => {
            let reviewDiv = document.createElement("div");
            reviewDiv.classList.add("review");

            let stars = "★".repeat(review.rating) + "☆".repeat(5 - review.rating);
            reviewDiv.innerHTML = `<strong>${stars}</strong><br>${review.text}`;
            reviewList.appendChild(reviewDiv);
        });
    }

    // Handle star rating selection
    stars.forEach(star => {
        star.addEventListener("mouseover", function () {
            let rating = parseInt(this.getAttribute("data-value"));
            updateStarSelection(rating);
        });

        star.addEventListener("click", function () {
            selectedRating = parseInt(this.getAttribute("data-value"));
            updateStarSelection(selectedRating);
        });
    });

    // Update star colors based on the selected rating
    function updateStarSelection(rating) {
        stars.forEach(star => {
            let starValue = parseInt(star.getAttribute("data-value"));
            if (starValue <= rating) {
                star.classList.add("selected");
            } else {
                star.classList.remove("selected");
            }
        });
    }

    document.getElementById("reviewForm").addEventListener("submit", function (event) {
        event.preventDefault();
        let reviewText = document.getElementById("review-text").value.trim();

        if (reviewText && selectedRating > 0) {
            reviews.push({ text: reviewText, rating: selectedRating });
            localStorage.setItem("reviews", JSON.stringify(reviews));

            document.getElementById("review-text").value = "";
            selectedRating = 0;
            updateStarSelection(0);
            displayReviews();
        } else {
            alert("Моля, въведете отзив и изберете рейтинг!");
        }
    });

    displayReviews();
});

    </script>
</body>

</html>